s<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D Plate Configurator V5.12 Bulletproof</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light only">
  <style>
    @font-face {
      font-family: 'Vicplate';
      src: url('https://cdn.jsdelivr.net/gh/Tim98345/fonts/Vicplate-Regular.woff2') format("woff2");
    }
    @font-face {
      font-family: 'FE Mittelschrift';
      src: url('https://cdn.jsdelivr.net/gh/Tim98345/fonts/FE-Mittelschrift.woff2') format("woff2");
    }
    @font-face {
      font-family: 'Arial Narrow';
      src: url('https://cdn.jsdelivr.net/gh/Tim98345/fonts/Arial-Narrow-Bold.woff2') format("woff2");
    }
    @font-face {
      font-family: 'Arial';
      src: url('https://cdn.jsdelivr.net/gh/Tim98345/fonts/Arial-Bold.woff2') format("woff2");
    }
    body {
      background: #cccccc;
      margin: 0;
      font-family: Arial, sans-serif;
    }
    .configurator {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      max-width: 650px;
      margin: 40px auto;
    }
    canvas {
      display: block;
      margin: 20px auto;
      border: 1px solid #000;
      background: white;
    }
    svg {
      position: absolute;
      top: -9999px;
      left: -9999px;
      visibility: hidden;
    }
  </style>
</head>
<body>

<div class="configurator">
  <h1>3D Plate Configurator V5.12 Bulletproof</h1>

  <label>Plate Style:</label><br>
  <label><input type="radio" name="style" value="small"checked> Small Plate</label><br>
  <label><input type="radio" name="style" value="euro"> Euro Style</label><br>
  <label><input type="radio" name="style" value="largeSide"> Large-Side-State</label><br>
  <label><input type="radio" name="style" value="largeBottom"> Large-Bottom-State</label><br><br>

  <label>Main Text: <input type="text" id="mainText" value="CUSTOM"></label><br><br>
  <label>Location Text: <input type="text" id="bottomText" value="VICTORIA"></label><br><br>

  <label>Text Color: 
    <select id="textColor">
      <option value="#0000FF">Blue</option>
      <option value="#000000">Black</option>
      <option value="#FFFFFF" selected>White</option>
      <option value="#FFFF00">Yellow</option>
      <option value="#FFD700">Gold</option>
      <option value="#C0C0C0">Silver</option>
      <option value="#FF0000">Red</option>
    </select>
  </label><br><br>

  <label>Background Color: 
    <select id="bgColor">
      <option value="#0000FF">Blue</option>
      <option value="#000000">Black</option>
      <option value="#FFFFFF">White</option>
      <option value="#FFFF00">Yellow</option>
      <option value="#FFD700">Gold</option>
      <option value="#C0C0C0">Silver</option>
      <option value="#FF0000">Red</option>
    </select>
  </label><br><br>

  <label><input type="checkbox" id="holesToggle" checked> Show Holes</label><br><br>

  <canvas id="plateCanvas" width="480" height="200"></canvas>
</div>

<!-- Hidden SVG for rendering -->
<svg id="plateSVG" xmlns="http://www.w3.org/2000/svg" width="480" height="200"></svg>

<script>
const styles = document.getElementsByName("style");
const textColor = document.getElementById("textColor");
const bgColor = document.getElementById("bgColor");
const holesToggle = document.getElementById("holesToggle");
const mainText = document.getElementById("mainText");
const bottomText = document.getElementById("bottomText");
const svg = document.getElementById("plateSVG");
const canvas = document.getElementById("plateCanvas");
const ctx = canvas.getContext("2d");

function update() {
  const style = document.querySelector('input[name="style"]:checked').value;
  const val = mainText.value.toUpperCase();
  const bottomVal = bottomText.value.toUpperCase();
  const color = textColor.value;
  const bg = bgColor.value;
  const showHoles = holesToggle.checked;

  // Clear SVG
  svg.innerHTML = '';

  if (style === "euro") {
    svg.setAttribute("viewBox", "0 0 120 50");
    svg.setAttribute("width", 480);
    svg.setAttribute("height", 200);

    svg.innerHTML = `
      <rect x="1" y="1" width="118" height="48" rx="5" ry="5" stroke="${color}" stroke-width="2" fill="${bg}" />
      ${showHoles ? `
        <circle cx="5" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="115" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="5" cy="45" r="1.5" fill="#cccccc"/>
        <circle cx="115" cy="45" r="1.5" fill="#cccccc"/>` : ``}
      <text x="60" y="11" font-size="8" text-anchor="middle" fill="${color}" font-family="Arial Narrow">${bottomVal||'VIC'}</text>
      <text x="61.5" y="40" text-anchor="middle" fill="${color}" font-family="FE Mittelschrift" font-size="34">${val}</text>
    `;
  }

  if (style === "small") {
    svg.setAttribute("viewBox", "0 0 120 50");
    svg.setAttribute("width", 480);
    svg.setAttribute("height", 200);

    let bottomSpan = '';
    for (let c of bottomVal) {
      bottomSpan += `<tspan dx="1" fill="${color}">${c}</tspan>`;
    }

    svg.innerHTML = `
      <rect x="1" y="1" width="118" height="48" rx="5" ry="5" stroke="${color}" stroke-width="2" fill="${bg}" />
      ${showHoles ? `
        <circle cx="5" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="115" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="5" cy="45" r="1.5" fill="#cccccc"/>
        <circle cx="115" cy="45" r="1.5" fill="#cccccc"/>` : ``}
      <text x="61.5" y="31" font-size="28" text-anchor="middle" fill="${color}" font-family="Vicplate">${val}</text>
      <text x="60" y="45" font-size="10" text-anchor="middle" font-family="Arial">${bottomSpan}</text>
    `;
  }

  if (style === "largeSide") {
    svg.setAttribute("viewBox", "0 0 180 65");
    svg.setAttribute("width", 480);
    svg.setAttribute("height", 173);
    
    const letters = (bottomVal.padEnd(3,' ')).substring(0,3).toUpperCase();
    let mainSpan = '';
    const startX = 95 - ((val.length - 1) * 23 / 2);
    for (let i = 0; i < val.length; i++) {
      mainSpan += `<tspan x="${startX + i*23}" y="54">${val[i]}</tspan>`;
    }

    svg.innerHTML = `
      <rect x="1" y="1" width="178" height="63" rx="5" ry="5" stroke="${color}" stroke-width="2" fill="${bg}" />
      ${showHoles ? `
        <circle cx="5" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="175" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="5" cy="60" r="1.5" fill="#cccccc"/>
        <circle cx="175" cy="60" r="1.5" fill="#cccccc"/>` : ``}
      <text x="8" y="22" font-size="18" fill="${color}" font-family="Vicplate">${letters[0]}</text>
      <text x="8" y="40" font-size="18" fill="${color}" font-family="Vicplate">${letters[1]}</text>
      <text x="8" y="57" font-size="18" fill="${color}" font-family="Vicplate">${letters[2]}</text>
      <text text-anchor="middle" font-size="56" fill="${color}" font-family="Vicplate">${mainSpan}</text>
    `;
  }

  if (style === "largeBottom") {
    svg.setAttribute("viewBox", "0 0 180 65");
    svg.setAttribute("width", 480);
    svg.setAttribute("height", 173);
    
    let mainSpan = '';
    const startBX = 90 - ((val.length - 1) * 17 / 2);
    for (let i = 0; i < val.length; i++) {
      mainSpan += `<tspan x="${startBX + i*17}" y="42">${val[i]}</tspan>`;
    }

    svg.innerHTML = `
      <rect x="1" y="1" width="178" height="63" rx="5" ry="5" stroke="${color}" stroke-width="2" fill="${bg}" />
      ${showHoles ? `
        <circle cx="5" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="175" cy="5" r="1.5" fill="#cccccc"/>
        <circle cx="5" cy="60" r="1.5" fill="#cccccc"/>
        <circle cx="175" cy="60" r="1.5" fill="#cccccc"/>` : ``}
      <text text-anchor="middle" font-size="42" fill="${color}" font-family="Vicplate">${mainSpan}</text>
      <text x="90" y="58" font-size="11" text-anchor="middle" fill="${color}" font-family="Arial">${bottomVal}</text>
    `;
  }

  rasterizeSVG();
}

function rasterizeSVG() {
  const xml = new XMLSerializer().serializeToString(svg);
  const svg64 = btoa(unescape(encodeURIComponent(xml)));
  const image64 = 'data:image/svg+xml;base64,' + svg64;

  const img = new Image();
  img.onload = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
  };
  img.src = image64;
}

styles.forEach(r => r.addEventListener("change", update));
[mainText, bottomText, textColor, bgColor, holesToggle].forEach(input => input.addEventListener("input", update));

update();
</script>

</body>
</html>
